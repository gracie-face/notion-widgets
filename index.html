<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Weather Pills â€” Notion-Friendly (No external iframes)</title>
  <style>
    :root{
      --pill-w: 161px;  /* 15% wider than ~140px */
      --pill-h: 261px;  /* 10% shorter than ~290px */
      --pill-r: 60px;
      --pill-bg:#ffb6a9;
      --text:#AB1717;
    }
    body{
      margin:0;
      padding:20px;
      font-family: Arial, Helvetica, sans-serif;
      background:#f5f5f5;
      color:var(--text);
    }
    .weather-container{
      display:flex;
      gap:20px;
      overflow-x:auto;
      padding:10px;
      scrollbar-width:thin;
      scrollbar-color:#888 #f1f1f1;
    }
    .weather-container::-webkit-scrollbar{height:8px}
    .weather-container::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}
    .weather-container::-webkit-scrollbar-thumb{background:#888;border-radius:10px}
    .weather-container::-webkit-scrollbar-thumb:hover{background:#555}

    .pill{
      width:var(--pill-w);
      height:var(--pill-h);
      border-radius:var(--pill-r);
      background:var(--pill-bg);
      box-shadow:0 2px 10px rgba(0,0,0,.1);
      flex:0 0 auto;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }
    .inner{
      width:86%;
      text-align:center;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:8px;
    }
    .city{
      font-weight:900;
      letter-spacing:.5px;
      line-height:1.05;
      font-size:15px;
    }
    .icon{
      font-size:42px;
      line-height:1;
      margin:6px 0;
    }
    .temp{
      font-size:34px;
      font-weight:900;
    }
    .desc{
      font-weight:800;
      font-size:14px;
      text-transform:lowercase;
    }
  </style>
</head>
<body>
  <div class="weather-container" id="wrap"></div>

  <script>
    // Notion-safe: no third-party iframes or external scripts.
    // Uses free Open-Meteo (no API key, CORS-friendly).
    const places = [
      {name1:"BROOKLYN", name2:"NEW YORK", lat:40.6782, lon:-73.9442},
      {name1:"HOOD RIVER", name2:"OREGON", lat:45.7054, lon:-121.5215},
      {name1:"WISCASSET", name2:"MAINE", lat:44.0026, lon:-69.6656},
      {name1:"BEND", name2:"OREGON", lat:44.0582, lon:-121.3153},
      {name1:"MONTEREY", name2:"CALIFORNIA", lat:36.6002, lon:-121.8947},
      {name1:"LOS ANGELES", name2:"CALIFORNIA", lat:34.0522, lon:-118.2437},
      {name1:"LAGOS", name2:"NIGERIA", lat:6.5244, lon:3.3792},
      {name1:"VASS", name2:"NORTH CAROLINA", lat:35.2563, lon:-79.2836},
    ];

    const codeMap = {
      0:{t:"clear sky", i:"ğŸŒ"}, 1:{t:"mainly clear", i:"ğŸŒ¤ï¸"}, 2:{t:"partly cloudy", i:"â›…"},
      3:{t:"overcast", i:"â˜ï¸"}, 45:{t:"fog", i:"ğŸŒ«ï¸"}, 48:{t:"rime fog", i:"ğŸŒ«ï¸"},
      51:{t:"light drizzle", i:"ğŸŒ¦ï¸"}, 53:{t:"drizzle", i:"ğŸŒ¦ï¸"}, 55:{t:"heavy drizzle", i:"ğŸŒ§ï¸"},
      56:{t:"freezing drizzle", i:"ğŸŒ§ï¸"}, 57:{t:"heavy freezing drizzle", i:"ğŸŒ§ï¸"},
      61:{t:"light rain", i:"ğŸŒ§ï¸"}, 63:{t:"rain", i:"ğŸŒ§ï¸"}, 65:{t:"heavy rain", i:"ğŸŒ§ï¸"},
      66:{t:"freezing rain", i:"ğŸŒ§ï¸"}, 67:{t:"heavy freezing rain", i:"ğŸŒ§ï¸"},
      71:{t:"light snow", i:"ğŸŒ¨ï¸"}, 73:{t:"snow", i:"ğŸŒ¨ï¸"}, 75:{t:"heavy snow", i:"â„ï¸"},
      77:{t:"snow grains", i:"ğŸŒ¨ï¸"}, 80:{t:"rain showers", i:"ğŸŒ¦ï¸"}, 81:{t:"heavy showers", i:"ğŸŒ§ï¸"},
      82:{t:"violent showers", i:"â›ˆï¸"}, 85:{t:"snow showers", i:"ğŸŒ¨ï¸"}, 86:{t:"heavy snow showers", i:"â„ï¸"},
      95:{t:"thunderstorm", i:"â›ˆï¸"}, 96:{t:"thunderstorm hail", i:"â›ˆï¸"}, 99:{t:"heavy hail storm", i:"â›ˆï¸"}
    };

    const wrap = document.getElementById('wrap');

    function pillTemplate(p){
      const el = document.createElement('div');
      el.className = 'pill';
      el.innerHTML = `
        <div class="inner">
          <div class="city">${p.name1}<br>${p.name2}</div>
          <div class="icon">â€¦</div>
          <div class="temp">--Â°F</div>
          <div class="desc">loadingâ€¦</div>
        </div>`;
      return el;
    }

    async function loadPlace(p, el){
      const url = `https://api.open-meteo.com/v1/forecast?latitude=${p.lat}&longitude=${p.lon}&current=temperature_2m,weather_code&temperature_unit=fahrenheit&timezone=auto`;
      try{
        const res = await fetch(url);
        const data = await res.json();
        const cur = data.current;
        const entry = codeMap[cur.weather_code] || {t:"â€”", i:"â˜ï¸"};
        el.querySelector('.icon').textContent = entry.i;
        el.querySelector('.temp').textContent = Math.round(cur.temperature_2m) + "Â°F";
        el.querySelector('.desc').textContent = entry.t;
      }catch(e){
        el.querySelector('.icon').textContent = "âš ï¸";
        el.querySelector('.temp').textContent = "--Â°F";
        el.querySelector('.desc').textContent = "unavailable";
      }
    }

    // render all pills and fetch weather
    places.forEach(p=>{
      const el = pillTemplate(p);
      wrap.appendChild(el);
      loadPlace(p, el);
    });
  </script>
</body>
</html>
